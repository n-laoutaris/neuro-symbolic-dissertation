@prefix cccev: <http://data.europa.eu/m8g/> .
@prefix cpsv: <http://purl.org/vocab/cpsv#> .
@prefix dct: <http://purl.org/dc/terms/> .
@prefix ex: <http://example.org/> .
@prefix ns1: <http://example.org/schema#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .

ex:Student_Housing_Allowance a cpsv:PublicService ;
    cpsv:holdsRequirement ex:academic_progress_condition,
        ex:academic_status_condition,
        ex:citizenship_condition,
        ex:family_income_limit_condition,
        ex:no_property_ownership_in_study_city_condition,
        ex:residence_and_lease_condition,
        ex:total_property_area_limit_condition .

ex:FamilyHome a ns1:Residence ;
    ns1:locatedIn ex:ThessalonikiMunicipality ;
    ns1:residenceType "Owned" .

ex:academic_id_status a cccev:InformationConcept ;
    ex:mapsTo ex:KaterinaEduRecord .

ex:academic_progress_condition a cccev:Constraint ;
    cccev:constrains ex:passed_courses_count,
        ex:total_courses_count ;
    dct:description "The student must have successfully passed exams for at least half of the required courses from the previous academic year." .

ex:academic_status_condition a cccev:Constraint ;
    cccev:constrains ex:academic_id_status,
        ex:enrollment_status ;
    dct:description "The student must be enrolled in a Higher Education Institution (HEI) and possess a valid academic ID." .

ex:aggregated_family_income a cccev:InformationConcept ;
    ex:mapsTo ex:DadIncome,
        ex:KaterinaIncome,
        ex:MomIncome .

ex:aggregated_property_area a cccev:InformationConcept ;
    ex:mapsTo ex:DadMainProperty,
        ex:MomVillageHouse .

ex:applicant_citizenship a cccev:InformationConcept ;
    ex:mapsTo ex:Katerina .

ex:citizenship_condition a cccev:Constraint ;
    cccev:constrains ex:applicant_citizenship ;
    dct:description "The student must be a Greek citizen or a citizen of another European Union country." .

ex:city_of_study a cccev:InformationConcept ;
    ex:mapsTo ex:AthensMunicipality .

ex:current_residence_city a cccev:InformationConcept ;
    ex:mapsTo ex:AthensMunicipality .

ex:current_residence_type a cccev:InformationConcept ;
    ex:mapsTo ex:StudentApartment .

ex:dependent_child_status a cccev:InformationConcept ;
    ex:mapsTo ex:Katerina,
        ex:Yannis .

ex:enrollment_status a cccev:InformationConcept ;
    ex:mapsTo ex:AthensMunicipality .

ex:family_income_limit_condition a cccev:Constraint ;
    cccev:constrains ex:aggregated_family_income,
        ex:dependent_child_status ;
    dct:description "The annual family income must not exceed €30,000, with this limit increasing by €3,000 for each dependent child after the first." .

ex:family_residence_city a cccev:InformationConcept ;
    ex:mapsTo ex:ThessalonikiMunicipality .

ex:lease_start_date a cccev:InformationConcept ;
    ex:mapsTo ex:StudentApartment .

ex:no_property_ownership_in_study_city_condition a cccev:Constraint ;
    cccev:constrains ex:city_of_study,
        ex:owned_property_locations ;
    dct:description "Neither the student nor their parents can have full ownership or usufruct of a property in the city where the student is studying." .

ex:owned_property_locations a cccev:InformationConcept ;
    ex:mapsTo ex:ThessalonikiMunicipality,
        ex:TinyVillageMunicipality .

ex:passed_courses_count a cccev:InformationConcept ;
    ex:mapsTo ex:KaterinaEduRecord .

ex:property_location_population a cccev:InformationConcept ;
    ex:mapsTo ex:ThessalonikiMunicipality,
        ex:TinyVillageMunicipality .

ex:residence_and_lease_condition a cccev:Constraint ;
    cccev:constrains ex:current_residence_city,
        ex:current_residence_type,
        ex:family_residence_city,
        ex:lease_start_date ;
    dct:description "The student must be renting accommodation in a city different from their primary family residence, and the lease must be valid for at least six months." .

ex:total_courses_count a cccev:InformationConcept ;
    ex:mapsTo ex:KaterinaEduRecord .

ex:total_property_area_limit_condition a cccev:Constraint ;
    cccev:constrains ex:aggregated_property_area,
        ex:property_location_population ;
    dct:description "The total area of real estate (owner-occupied or rented out) owned by the student or their parents must not cumulatively exceed 200 square meters. (This limit excludes properties located in a municipality or community with a population of less than 3,000 inhabitants)." .

ex:Dad a ns1:Person ;
    ns1:birthDate "1970-01-01"^^xsd:date ;
    ns1:hasChild ex:Katerina,
        ex:Yannis ;
    ns1:hasIncome ex:DadIncome ;
    ns1:ownsRealEstate ex:DadMainProperty .

ex:DadIncome a ns1:IncomeRecord ;
    ns1:amount 25000.0 ;
    ns1:incomeYear "2024"^^xsd:gYear .

ex:DadMainProperty a ns1:RealEstateProperty ;
    ns1:propertyAreaM2 150.0 ;
    ns1:propertyLocation ex:ThessalonikiMunicipality .

ex:KaterinaIncome a ns1:IncomeRecord ;
    ns1:amount 0.0 ;
    ns1:incomeYear "2024"^^xsd:gYear .

ex:Mom a ns1:Person ;
    ns1:birthDate "1975-03-15"^^xsd:date ;
    ns1:hasChild ex:Katerina,
        ex:Yannis ;
    ns1:hasIncome ex:MomIncome ;
    ns1:ownsRealEstate ex:MomVillageHouse .

ex:MomIncome a ns1:IncomeRecord ;
    ns1:amount 7000.0 ;
    ns1:incomeYear "2024"^^xsd:gYear .

ex:MomVillageHouse a ns1:RealEstateProperty ;
    ns1:propertyAreaM2 80.0 ;
    ns1:propertyLocation ex:TinyVillageMunicipality .

ex:StudentApartment a ns1:Residence ;
    ns1:leaseStartDate "2024-09-01"^^xsd:date ;
    ns1:locatedIn ex:AthensMunicipality ;
    ns1:residenceType "Rented" .

ex:TinyVillageMunicipality a ns1:Municipality ;
    ns1:municipalityPopulation 500 .

ex:Yannis a ns1:Person ;
    ns1:birthDate "2015-06-01"^^xsd:date ;
    ns1:hasParent ex:Dad,
        ex:Mom ;
    ns1:isDependent true .

ex:Katerina a ns1:Applicant,
        ns1:Person ;
    ns1:birthDate "2003-05-20"^^xsd:date ;
    ns1:citizenshipCountry "GR" ;
    ns1:hasCurrentResidence ex:StudentApartment ;
    ns1:hasEducation ex:KaterinaEduRecord ;
    ns1:hasFamilyResidence ex:FamilyHome ;
    ns1:hasIncome ex:KaterinaIncome ;
    ns1:hasParent ex:Dad,
        ex:Mom ;
    ns1:isDependent true .

ex:KaterinaEduRecord a ns1:EducationRecord ;
    ns1:hasValidAcademicID true ;
    ns1:isEnrolledAt ex:AthensMunicipality ;
    ns1:passedCoursesCount 6 ;
    ns1:totalCoursesCount 10 .

ex:AthensMunicipality a ns1:Municipality ;
    ns1:municipalityPopulation 664046 .

ex:ThessalonikiMunicipality a ns1:Municipality ;
    ns1:municipalityPopulation 315196 .

